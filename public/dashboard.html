<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visão Geral | Helpers Solutions</title>
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="icon" type="image/png" href="assets/logo sem fundo.png" sizes="16x16">
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <script src="js/script.js" defer></script>
  </head>
  <body onload="menuLateral()">
    <div class="kpiModal">
      <div class="kpiMain">
        
      </div>
    </div>
    <!-- BOBIA -->
    <div onclick="aparecer_ia()" id="div_icone_ia"></div>
    <div id="container_perguntar" style="display: none;">
      <br><br>
      <div id="div_sair_ia" onclick="desaparecer_ia()">Sair do suporte ➡️</div>
      <br><br>
      <h1>BobIA</h1>
      <textarea
        id="pergunta"
        type="text"
        placeholder="Digite a pergunta..."
      ></textarea>
      <br /><br />
      <button onclick="gerarResposta()">Gerar Resposta</button>
      <h3>Resposta da IA:</h3>
      <div id="resposta"></div>
    </div>
    <div class="sideBar">
      <div class="sidebarTop">
        <h1 class="title">Helpers</h1>
        <div class="boxProfile">
          <img class="imgProfile" src="assets/user white.png" alt="">
          <div class="nomes">
            <h2 class="nomeEmpresa" id="nomeEmpresa"></h2>
            <h3 class="nomeUsuario" id="nomeUsuario"></h3>
          </div>
        </div>
      </div>
      <div class="navBar">
        <a href="dashboard.html" class="agora">Visão Geral</a>
        <a href="relatorios.html">Logs</a>
        <a href="cadastrarMaquina.html">Cadastrar Máquinas</a>
        <a href="formsSuporte.html">Suporte Técnico</a>
        <a class="btnSair" id="btn_sair" onclick="limparSessao()">Sair</a>
      </div>
    </div>
    <div class="main">
      <h1 class="tituloKPIS">Informações Gerais</h1>
      <div class="kpis">
        <div class="kpi">
            <span>MÁQUINA 5 detectou</span>
            <span class="kpi1">SUPERAQUECIMENTO!</span>
        </div>
        <div class="kpi">
            <span>MÁQUINA 5 detectou</span>
            <span class="kpi2">RESFRIAMENTO!</span>
        </div>
        <div class="kpi">
            <span>Média de Temperatura Recomendada</span>
            <span class="kpi3">110 - 140ºC</span>
        </div>
        <div class="kpi">
            <span>Recomenda-se manutenção</span>
            <span class="kpi4">MÁQUINA 2 | MÁQUINA 5</span>
        </div>
      </div>
      <div class="setorContainer">
        <h2>Filtro de Setor</h2>
        <select id="slc_setor" class="setorSelect">
        </select>
      </div>
      <div class="graficosTop">
        <div class="graficoConteiner">
          <div class="btnsGrafico1">
            <button class="btnGrafico" onclick="grafico1(1)">Dia</button>
            <button class="btnGrafico" onclick="grafico1(2)">Mês</button>
            <button class="btnGrafico" onclick="grafico1(3)">Ano</button>
          </div>
          <canvas style="width: 100%; height: 100%" id="myChart"></canvas>
        </div>
        <div class="graficoConteiner">
          <canvas style="width: 100%; height: 100%" id="myChart2"></canvas>
        </div>
      </div>
      <div class="graficosBottom">
        <div class="graficoIndividual">
          <select class="selectSensor" id="sltSensor" onchange="sensorChange(this.value)">
          </select>
          <canvas style="width: 100%; height: 100%" id="myChart3"></canvas>
        </div>
      </div>
    </div>
    <script src="js/dashboard.js" defer></script>
  </body>
</html>


<script>
  async function gerarResposta() {
            const pergunta = document.getElementById('pergunta').value;

            const response = await fetch('/perguntar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ pergunta })
            });

            const data = await response.json();

            resposta.style.display = 'block';
            document.getElementById('resposta').innerText = data.resultado;
        }

        function aparecer_ia() {
          document.getElementById('div_icone_ia').style.display = 'none';
          document.getElementById('container_perguntar').style.display = 'flex';
        }

        function desaparecer_ia() {
          document.getElementById('div_icone_ia').style.display = 'flex';
          document.getElementById('container_perguntar').style.display = 'none';
        }
</script>